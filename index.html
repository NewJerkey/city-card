<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="Description" content="Put your description here." />
    <base href="/" />

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
        background-color: #ededed;
      }
      .buttons button {
        border-radius: 25px;
        color: yellow;
        background-color: #4caf50;
      }

      button:hover,
      button:focus {
        background-color: blue;
      }
      .list {
        text-align: left;
      }
    </style>
    <title>city-card</title>
  </head>

  <body>
    <div class="buttons">
      <button class="copy">Duplicate</button>
      <button class="changeBackground">Change Background</button>
      <button class="changeTitle">Change Title</button>
      <button id="delete">Delete Last Instance</button>
      <button class="details">Details</button>
    </div>
    <div id="app">
      <city-card>
        <img slot="imagelocation" src="https://btopro.com/assets/banner.jpg" />
        <ul class="list">
          <li>State: Pennsylvania</li>
          <li>Crime Index: 7.9/10</li>
          <li>Sugar Tax: Yes</li>
          <li>Things to Do: Leave</li>
        </ul>
      </city-card>
    </div>

    <script type="module" src="./src/city-card.js"></script>
    <script>
      const toggleBackground = document.querySelector(".changeBackground");

      const changeTitle = document.querySelector(".changeTitle");

      const deleteButton = document.querySelector("#delete");

      const copyButton = document.querySelector(".copy");

      const detailsButton = document.querySelector(".details");

      const card = document.querySelector("city-card");

      function getRandomColor() {
        var letters = "0123456789ABCDEF";
        var color = "#";
        for (var i = 0; i < 6; i++) {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }

      // Just pretend you didn't see this
      function strobe() {
        var color = getRandomColor();
        document.querySelector("body").style.backgroundColor = color;
        document.querySelector("html").style.backgroundColor = color;
      }

      // Uncomment to give someone a seizure
      // window.setInterval(strobe, 100);

      copyButton.addEventListener("click", function (e) {
        const clone = card.cloneNode();
        document.querySelector("#app").appendChild(clone);
      });

      toggleBackground.addEventListener("click", function (e) {
        // Uncomment to also change card background color
        // card.shadowRoot.querySelector('.card').style.backgroundColor = getRandomColor();
        var color = getRandomColor();
        document.querySelector("body").style.backgroundColor = color;
        document.querySelector("html").style.backgroundColor = color;
      });

      changeTitle.addEventListener("click", function (e) {
        if (card.title == "Bryce Schneider") {
          card.setAttribute("title", "Something Else");
        } else {
          card.setAttribute("title", "Bryce Schneider");
        }
      });

      deleteButton.addEventListener("click", function (e) {
        if (
          document.querySelector("#app :last-child") !==
          document.querySelector("city-card")
        ) {
          document.querySelector("#app :last-child").remove();
        }
      });

      detailsButton.addEventListener("click", function (e) {
        if (card.shadowRoot.querySelector(".stats").style.display === "none") {
          card.shadowRoot.querySelector(".stats").style.display = "block";
        } else {
          card.shadowRoot.querySelector(".stats").style.display = "none";
        }
      });

      addEventListener("load", function (e) {
        if (card.shadowRoot.querySelector(".stats").style.display === "none") {
          card.shadowRoot.querySelector(".stats").style.display = "block";
        } else {
          card.shadowRoot.querySelector(".stats").style.display = "none";
        }
      });

      // if you are reading this you are very handsome
    </script>
  </body>
</html>
